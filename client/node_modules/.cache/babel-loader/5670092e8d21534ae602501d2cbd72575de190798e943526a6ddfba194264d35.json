{"ast":null,"code":"import _objectSpread from\"/home/ranganath/projects/multimart-react-ecommerce/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{createSlice}from\"@reduxjs/toolkit\";var storedCartList=localStorage.getItem(\"cartList\")!==null?JSON.parse(localStorage.getItem(\"cartList\")):[];var initialState={cartList:storedCartList};export var cartSlice=createSlice({name:\"cart\",initialState:initialState,reducers:{addToCart:function addToCart(state,action){var productToAdd=action.payload.product;var quantity=action.payload.num;var productExit=state.cartList.find(function(item){return item.id===productToAdd.id;});if(productExit){state.cartList=state.cartList.map(function(item){return item.id===action.payload.product.id?_objectSpread(_objectSpread({},productExit),{},{qty:productExit.qty+action.payload.num}):item;});}else{state.cartList.push(_objectSpread(_objectSpread({},productToAdd),{},{qty:quantity}));}},decreaseQty:function decreaseQty(state,action){var productTodecreaseQnty=action.payload;var productExit=state.cartList.find(function(item){return item.id===productTodecreaseQnty.id;});if(productExit.qty===1){state.cartList=state.cartList.filter(function(item){return item.id!==productExit.id;});}else{state.cartList=state.cartList.map(function(item){return item.id===productExit.id?_objectSpread(_objectSpread({},productExit),{},{qty:productExit.qty-1}):item;});}},deleteProduct:function deleteProduct(state,action){var productToDelete=action.payload;state.cartList=state.cartList.filter(function(item){return item.id!==productToDelete.id;});}}});export var cartMiddleware=function cartMiddleware(store){return function(next){return function(action){var _action$type;var result=next(action);if((_action$type=action.type)!==null&&_action$type!==void 0&&_action$type.startsWith(\"cart/\")){var cartList=store.getState().cart.cartList;localStorage.setItem(\"cartList\",JSON.stringify(cartList));}return result;};};};var _cartSlice$actions=cartSlice.actions,addToCart=_cartSlice$actions.addToCart,decreaseQty=_cartSlice$actions.decreaseQty,deleteProduct=_cartSlice$actions.deleteProduct;export{addToCart,decreaseQty,deleteProduct};export default cartSlice.reducer;","map":{"version":3,"names":["createSlice","storedCartList","localStorage","getItem","JSON","parse","initialState","cartList","cartSlice","name","reducers","addToCart","state","action","productToAdd","payload","product","quantity","num","productExit","find","item","id","map","_objectSpread","qty","push","decreaseQty","productTodecreaseQnty","filter","deleteProduct","productToDelete","cartMiddleware","store","next","_action$type","result","type","startsWith","getState","cart","setItem","stringify","_cartSlice$actions","actions","reducer"],"sources":["/home/ranganath/projects/multimart-react-ecommerce/client/src/app/features/cart/cartSlice.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\n\nconst storedCartList =\n  localStorage.getItem(\"cartList\") !== null\n    ? JSON.parse(localStorage.getItem(\"cartList\"))\n    : [];\n\nconst initialState = {\n  cartList: storedCartList,\n};\n\nexport const cartSlice = createSlice({\n  name: \"cart\",\n  initialState,\n  reducers: {\n    addToCart: (state, action) => {\n      const productToAdd = action.payload.product;\n      const quantity = action.payload.num;\n      const productExit = state.cartList.find(\n        (item) => item.id === productToAdd.id\n      );\n      if (productExit) {\n        state.cartList = state.cartList.map((item) =>\n          item.id === action.payload.product.id\n            ? { ...productExit, qty: productExit.qty + action.payload.num }\n            : item\n        );\n      } else {\n        state.cartList.push({ ...productToAdd, qty: quantity });\n      }\n    },\n    decreaseQty: (state, action) => {\n      const productTodecreaseQnty = action.payload;\n      const productExit = state.cartList.find(\n        (item) => item.id === productTodecreaseQnty.id\n      );\n      if (productExit.qty === 1) {\n        state.cartList = state.cartList.filter(\n          (item) => item.id !== productExit.id\n        );\n      } else {\n        state.cartList = state.cartList.map((item) =>\n          item.id === productExit.id\n            ? { ...productExit, qty: productExit.qty - 1 }\n            : item\n        );\n      }\n    },\n    deleteProduct: (state, action) => {\n      const productToDelete = action.payload;\n      state.cartList = state.cartList.filter(\n        (item) => item.id !== productToDelete.id\n      );\n    },\n  },\n});\n\nexport const cartMiddleware = (store) => (next) => (action) => {\n  const result = next(action);\n  if (action.type?.startsWith(\"cart/\")) {\n    const cartList = store.getState().cart.cartList;\n    localStorage.setItem(\"cartList\", JSON.stringify(cartList));\n  }\n  return result;\n};\n\nexport const { addToCart, decreaseQty, deleteProduct } = cartSlice.actions;\n\nexport default cartSlice.reducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}