{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nconst storedCartList = localStorage.getItem(\"cartList\") !== null ? JSON.parse(localStorage.getItem(\"cartList\")) : [];\nconst initialState = {\n  cartList: storedCartList\n};\nexport const cartSlice = createSlice({\n  name: \"cart\",\n  initialState,\n  reducers: {\n    addToCart: (state, action) => {\n      const productToAdd = action.payload.product;\n      const quantity = action.payload.num;\n      const productExit = state.cartList.find(item => item.id === productToAdd.id);\n      if (productExit) {\n        state.cartList = state.cartList.map(item => item.id === action.payload.product.id ? {\n          ...productExit,\n          qty: productExit.qty + action.payload.num\n        } : item);\n      } else {\n        state.cartList.push({\n          ...productToAdd,\n          qty: quantity\n        });\n      }\n    },\n    decreaseQty: (state, action) => {\n      const productTodecreaseQnty = action.payload;\n      const productExit = state.cartList.find(item => item.id === productTodecreaseQnty.id);\n      if (productExit.qty === 1) {\n        state.cartList = state.cartList.filter(item => item.id !== productExit.id);\n      } else {\n        state.cartList = state.cartList.map(item => item.id === productExit.id ? {\n          ...productExit,\n          qty: productExit.qty - 1\n        } : item);\n      }\n    },\n    deleteProduct: (state, action) => {\n      const productToDelete = action.payload;\n      state.cartList = state.cartList.filter(item => item.id !== productToDelete.id);\n    }\n  }\n});\nexport const cartMiddleware = store => next => action => {\n  var _action$type;\n  const result = next(action);\n  if ((_action$type = action.type) !== null && _action$type !== void 0 && _action$type.startsWith(\"cart/\")) {\n    const cartList = store.getState().cart.cartList;\n    localStorage.setItem(\"cartList\", JSON.stringify(cartList));\n  }\n  return result;\n};\nexport const {\n  addToCart,\n  decreaseQty,\n  deleteProduct\n} = cartSlice.actions;\nexport default cartSlice.reducer;","map":{"version":3,"names":["createSlice","storedCartList","localStorage","getItem","JSON","parse","initialState","cartList","cartSlice","name","reducers","addToCart","state","action","productToAdd","payload","product","quantity","num","productExit","find","item","id","map","qty","push","decreaseQty","productTodecreaseQnty","filter","deleteProduct","productToDelete","cartMiddleware","store","next","_action$type","result","type","startsWith","getState","cart","setItem","stringify","actions","reducer"],"sources":["/home/ranganath/projects/multimart-react-ecommerce/client/src/app/features/cart/cartSlice.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\n\nconst storedCartList =\n  localStorage.getItem(\"cartList\") !== null\n    ? JSON.parse(localStorage.getItem(\"cartList\"))\n    : [];\n\nconst initialState = {\n  cartList: storedCartList,\n};\n\nexport const cartSlice = createSlice({\n  name: \"cart\",\n  initialState,\n  reducers: {\n    addToCart: (state, action) => {\n      const productToAdd = action.payload.product;\n      const quantity = action.payload.num;\n      const productExit = state.cartList.find(\n        (item) => item.id === productToAdd.id\n      );\n      if (productExit) {\n        state.cartList = state.cartList.map((item) =>\n          item.id === action.payload.product.id\n            ? { ...productExit, qty: productExit.qty + action.payload.num }\n            : item\n        );\n      } else {\n        state.cartList.push({ ...productToAdd, qty: quantity });\n      }\n    },\n    decreaseQty: (state, action) => {\n      const productTodecreaseQnty = action.payload;\n      const productExit = state.cartList.find(\n        (item) => item.id === productTodecreaseQnty.id\n      );\n      if (productExit.qty === 1) {\n        state.cartList = state.cartList.filter(\n          (item) => item.id !== productExit.id\n        );\n      } else {\n        state.cartList = state.cartList.map((item) =>\n          item.id === productExit.id\n            ? { ...productExit, qty: productExit.qty - 1 }\n            : item\n        );\n      }\n    },\n    deleteProduct: (state, action) => {\n      const productToDelete = action.payload;\n      state.cartList = state.cartList.filter(\n        (item) => item.id !== productToDelete.id\n      );\n    },\n  },\n});\n\nexport const cartMiddleware = (store) => (next) => (action) => {\n  const result = next(action);\n  if (action.type?.startsWith(\"cart/\")) {\n    const cartList = store.getState().cart.cartList;\n    localStorage.setItem(\"cartList\", JSON.stringify(cartList));\n  }\n  return result;\n};\n\nexport const { addToCart, decreaseQty, deleteProduct } = cartSlice.actions;\n\nexport default cartSlice.reducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}